!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Slate={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var o=n((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0}));r(o);var i=n((function(e){e.exports=function(e){if(Array.isArray(e))return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));r(i);var a=n((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));r(a);var u=n((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));r(u);var c=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));r(c);var s=r(n((function(e){e.exports=function(e){return i(e)||a(e)||u(e)||c()},e.exports.default=e.exports,e.exports.__esModule=!0}))),f=n((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));r(f);var l=n((function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}},e.exports.default=e.exports,e.exports.__esModule=!0}));r(l);var v=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));r(v);var h=r(n((function(e){e.exports=function(e,t){return f(e)||l(e,t)||u(e,t)||v()},e.exports.default=e.exports,e.exports.__esModule=!0}))),p=r(n((function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),d=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,w=new WeakMap;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e.path;return et.levels(t);case"insert_node":var r=e.node,n=e.path,o=et.levels(n),i=_i.isText(r)?[]:Array.from(Ze.nodes(r),(function(e){var t=h(e,2)[1];return n.concat(t)}));return[].concat(s(o),s(i));case"merge_node":var a=e.path,u=et.ancestors(a),c=et.previous(a);return[].concat(s(u),[c]);case"move_node":var f=e.path,l=e.newPath;if(et.equals(f,l))return[];var v,p=[],d=[],y=j(et.ancestors(f));try{for(y.s();!(v=y.n()).done;){var g=v.value,b=et.transform(g,e);p.push(b)}}catch(e){y.e(e)}finally{y.f()}var m,w=j(et.ancestors(l));try{for(w.s();!(m=w.n()).done;){var x=m.value,O=et.transform(x,e);d.push(O)}}catch(e){w.e(e)}finally{w.f()}var A=d[d.length-1],_=l[l.length-1],P=A.concat(_);return[].concat(p,d,[P]);case"remove_node":var k=e.path,E=et.ancestors(k);return s(E);case"split_node":var F=e.path,S=et.levels(F),D=et.next(F);return[].concat(s(S),[D]);default:return[]}},P=n((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0}));r(P);var k=r(n((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o=P(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0}))),E=n((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=_(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=f(e,t,r);if("normal"===c.type){if(n=r.done?p:v,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=p,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l="suspendedStart",v="suspendedYield",h="executing",p="completed",d={};function y(){}function g(){}function b(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(F([])));x&&x!==r&&n.call(x,i)&&(m=x);var O=b.prototype=y.prototype=Object.create(m);function j(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function F(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:S}}function S(){return{value:t,done:!0}}return g.prototype=O.constructor=b,b.constructor=g,g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(A.prototype),A.prototype[a]=function(){return this},e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(O),c(O,u,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=F,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));
/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
function F(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
	 * isobject <https://github.com/jonschlinkert/isobject>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
var t}function S(e){var t,r;return!1!==F(e)&&("function"==typeof(t=e.constructor)&&(!1!==F(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}var D=n((function(e,r){!function(n){var o=r,i=e&&e.exports==o&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(n=a);var u=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,c=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,s=function(e){for(var t="",r=(e=e.replace(u,(function(e,t,r){return s(r)+t})).replace(c,"$2$1")).length;r--;)t+=e.charAt(r);return t},f={version:"0.2.0",reverse:s};if(o&&!o.nodeType)if(i)i.exports=f;else for(var l in f)f.hasOwnProperty(l)&&(o[l]=f[l]);else n.esrever=f}(t)})).reverse,N=/\s/,C=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,B=/['\u2018\u2019]/,T=function(e){for(var t=0,r=null,n=e.charCodeAt(0);n;)if(M(n)){var o=z(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(L(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!q(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},R=function(e){for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var i=T(t);t=e.slice(n,n+i);var a=e.slice(n+i);if(I(t,a))o=!0,r+=i;else{if(o)break;r+=i}n+=i}return r},I=function e(t,r){if(N.test(t))return!1;if(B.test(t)){var n=r.charAt(0),o=T(n);if(e(n=r.slice(0,o),r.slice(o)))return!0}return!C.test(t)},M=function(e){return 55296<=e&&e<=57343},z=function(e,t,r){if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},q=function(e){return e<=65039&&e>=65024},L=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e},U={isAncestor:function(e){return S(e)&&Ze.isNodeList(e.children)},isElement:function(e){return S(e)&&Ze.isNodeList(e.children)&&!K.isEditor(e)},isElementList:function(e){return Array.isArray(e)&&e.every((function(e){return U.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},matches:function(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=new WeakMap,K={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.voids,n=void 0!==r&&r,o=t.mode,i=void 0===o?"lowest":o,a=t.at,u=void 0===a?e.selection:a,c=t.match;if(u){var s,f=K.path(e,u),l="lowest"===i,v=V(K.levels(e,{at:f,voids:n,match:c,reverse:l}));try{for(v.s();!(s=v.n()).done;){var p=h(s.value,2),d=p[0],y=p[1];if(!_i.isText(d)&&!et.equals(f,y))return[d,y]}}catch(e){v.e(e)}finally{v.f()}}},addMark:function(e,t,r){e.addMark(t,r)},after:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=K.point(e,t,{edge:"end"}),a=K.end(e,[]),u={anchor:i,focus:a},c=o.distance,s=void 0===c?1:c,f=0,l=V(K.positions(e,$($({},o),{},{at:u})));try{for(l.s();!(n=l.n()).done;){var v=n.value;if(f>s)break;0!==f&&(r=v),f++}}catch(e){l.e(e)}finally{l.f()}return r},before:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=K.start(e,[]),a=K.point(e,t,{edge:"start"}),u={anchor:i,focus:a},c=o.distance,s=void 0===c?1:c,f=0,l=V(K.positions(e,$($({},o),{},{at:u,reverse:!0})));try{for(l.s();!(n=l.n()).done;){var v=n.value;if(f>s)break;0!==f&&(r=v),f++}}catch(e){l.e(e)}finally{l.f()}return r},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteBackward(n)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteForward(n)},deleteFragment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.direction,n=void 0===r?"forward":r;e.deleteFragment(n)},edges:function(e,t){return[K.start(e,t),K.end(e,t)]},end:function(e,t){return K.point(e,t,{edge:"end"})},first:function(e,t){var r=K.path(e,t,{edge:"start"});return K.node(e,r)},fragment:function(e,t){var r=K.range(e,t),n=Ze.fragment(e,r);return n},hasBlocks:function(e,t){return t.children.some((function(t){return K.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return _i.isText(t)||K.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return _i.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return U.isElement(t)&&!e.isInline(t)},isEditor:function(e){if(!S(e))return!1;var t=G.get(e);if(void 0!==t)return t;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||S(e.marks))&&(null===e.selection||ut.isRange(e.selection))&&Ze.isNodeList(e.children)&&Qe.isOperationList(e.operations);return G.set(e,r),r},isEnd:function(e,t,r){var n=K.end(e,r);return ot.equals(t,n)},isEdge:function(e,t,r){return K.isStart(e,t,r)||K.isEnd(e,t,r)},isEmpty:function(e,t){var r=t.children,n=h(r,1)[0];return 0===r.length||1===r.length&&_i.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:function(e,t){return U.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=g.get(e);return void 0===t||t},isStart:function(e,t,r){if(0!==t.offset)return!1;var n=K.start(e,r);return ot.equals(t,n)},isVoid:function(e,t){return U.isElement(t)&&e.isVoid(t)},last:function(e,t){var r=K.path(e,t,{edge:"end"});return K.node(e,r)},leaf:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=K.path(e,t,r),o=Ze.leaf(e,n);return[o,n]},levels:E.mark((function(e){var t,r,n,o,i,a,u,c,s,f,l,v,p,d,y,g=arguments;return E.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:if(t=g.length>1&&void 0!==g[1]?g[1]:{},r=t.at,n=void 0===r?e.selection:r,o=t.reverse,i=void 0!==o&&o,a=t.voids,u=void 0!==a&&a,null==(c=t.match)&&(c=function(){return!0}),n){b.next=6;break}return b.abrupt("return");case 6:s=[],f=K.path(e,n),l=V(Ze.levels(e,f)),b.prev=9,l.s();case 11:if((v=l.n()).done){b.next=20;break}if(p=h(v.value,2),d=p[0],y=p[1],c(d,y)){b.next=15;break}return b.abrupt("continue",18);case 15:if(s.push([d,y]),u||!K.isVoid(e,d)){b.next=18;break}return b.abrupt("break",20);case 18:b.next=11;break;case 20:b.next=25;break;case 22:b.prev=22,b.t0=b.catch(9),l.e(b.t0);case 25:return b.prev=25,l.f(),b.finish(25);case 28:return i&&s.reverse(),b.delegateYield(s,"t1",30);case 30:case"end":return b.stop()}}),s,null,[[9,22,25,28]])})),marks:function(e){var t=e.marks,r=e.selection;if(!r)return null;if(t)return t;if(ut.isExpanded(r)){var n=K.nodes(e,{match:_i.isText}),o=h(n,1)[0];if(o){var i=h(o,1)[0];i.text;return k(i,["text"])}return{}}var a=r.anchor,u=a.path,c=K.leaf(e,u),s=h(c,1)[0];if(0===a.offset){var f=K.previous(e,{at:u,match:_i.isText}),l=K.above(e,{match:function(t){return K.isBlock(e,t)}});if(f&&l){var v=h(f,2),p=v[0],d=v[1],y=h(l,2)[1];et.isAncestor(y,d)&&(s=p)}}var g=s;g.text;return k(g,["text"])},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,u=t.at,c=void 0===u?e.selection:u;if(c){var s=K.after(e,c,{voids:i});if(s){var f=K.last(e,[]),l=h(f,2),v=l[1],p=[s.path,v];if(et.isPath(c)&&0===c.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(et.isPath(c)){var d=K.parent(e,c),y=h(d,1),g=y[0];a=function(e){return g.children.includes(e)}}else a=function(){return!0};var b=K.nodes(e,{at:p,match:a,mode:n,voids:i}),m=h(b,1),w=m[0];return w}}},node:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=K.path(e,t,r),o=Ze.get(e,n);return[o,n]},nodes:E.mark((function e(t){var r,n,o,i,a,u,c,s,f,l,v,p,d,y,g,b,m,w,x,O,j,A,_,P,k,F,S=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.length>1&&void 0!==S[1]?S[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.mode,a=void 0===i?"all":i,u=r.universal,c=void 0!==u&&u,s=r.reverse,f=void 0!==s&&s,l=r.voids,v=void 0!==l&&l,(p=r.match)||(p=function(){return!0}),o){e.next=6;break}return e.abrupt("return");case 6:Z.isSpan(o)?(d=o[0],y=o[1]):(g=K.path(t,o,{edge:"start"}),b=K.path(t,o,{edge:"end"}),d=f?b:g,y=f?g:b),m=Ze.nodes(t,{reverse:f,from:d,to:y,pass:function(e){var r=h(e,1)[0];return!v&&K.isVoid(t,r)}}),w=[],O=V(m),e.prev=10,O.s();case 12:if((j=O.n()).done){e.next=37;break}if(A=h(j.value,2),_=A[0],P=A[1],k=x&&0===et.compare(P,x[1]),"highest"!==a||!k){e.next=17;break}return e.abrupt("continue",35);case 17:if(p(_,P)){e.next=23;break}if(!c||k||!_i.isText(_)){e.next=22;break}return e.abrupt("return");case 22:return e.abrupt("continue",35);case 23:if("lowest"!==a||!k){e.next=26;break}return x=[_,P],e.abrupt("continue",35);case 26:if(!(F="lowest"===a?x:[_,P])){e.next=34;break}if(!c){e.next=32;break}w.push(F),e.next=34;break;case 32:return e.next=34,F;case 34:x=[_,P];case 35:e.next=12;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(10),O.e(e.t0);case 42:return e.prev=42,O.f(),e.finish(42);case 45:if("lowest"!==a||!x){e.next=52;break}if(!c){e.next=50;break}w.push(x),e.next=52;break;case 50:return e.next=52,x;case 52:if(!c){e.next=54;break}return e.delegateYield(w,"t1",54);case 54:case"end":return e.stop()}}),e,null,[[10,39,42,45]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,o=function(e){return d.get(e)||[]};if(K.isNormalizing(e)){if(n){var i=Array.from(Ze.nodes(e),(function(e){return h(e,2)[1]}));d.set(e,i)}0!==o(e).length&&K.withoutNormalizing(e,(function(){for(var t=42*o(e).length,r=0;0!==o(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var n=o(e).pop();if(Ze.has(e,n)){var i=K.node(e,n);e.normalizeNode(i)}r++}}))}},parent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=K.path(e,t,r),o=et.parent(n),i=K.node(e,o);return i},path:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.depth,o=r.edge;if(et.isPath(t))if("start"===o){var i=Ze.first(e,t),a=h(i,2),u=a[1];t=u}else if("end"===o){var c=Ze.last(e,t),s=h(c,2),f=s[1];t=f}return ut.isRange(t)&&(t="start"===o?ut.start(t):"end"===o?ut.end(t):et.common(t.anchor.path,t.focus.path)),ot.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},hasPath:function(e,t){return Ze.has(e,t)},pathRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return K.pathRefs(e).delete(i),i.current=null,t}},a=K.pathRefs(e);return a.add(i),i},pathRefs:function(e){var t=b.get(e);return t||(t=new Set,b.set(e,t)),t},point:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.edge,o=void 0===n?"start":n;if(et.isPath(t)){var i;if("end"===o){var a=Ze.last(e,t),u=h(a,2),c=u[1];i=c}else{var s=Ze.first(e,t),f=h(s,2),l=f[1];i=l}var v=Ze.get(e,i);if(!_i.isText(v))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(t,"] because it has no ").concat(o," text node."));return{path:i,offset:"end"===o?v.text.length:0}}if(ut.isRange(t)){var p=ut.edges(t),d=h(p,2),y=d[0],g=d[1];return"start"===o?y:g}return t},pointRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return K.pointRefs(e).delete(i),i.current=null,t}},a=K.pointRefs(e);return a.add(i),i},pointRefs:function(e){var t=m.get(e);return t||(t=new Set,m.set(e,t)),t},positions:E.mark((function e(t){var r,n,o,i,a,u,c,s,f,l,v,p,d,y,g,b,m,w,x,O,j,A,_,P,k,F,S,N,C,B=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C=function(e,t){return"character"===t?T(e):"word"===t?R(e):"line"===t||"block"===t?e.length:1},r=B.length>1&&void 0!==B[1]?B[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.unit,a=void 0===i?"offset":i,u=r.reverse,c=void 0!==u&&u,s=r.voids,f=void 0!==s&&s,o){e.next=5;break}return e.abrupt("return");case 5:l=K.range(t,o),v=ut.edges(l),p=h(v,2),d=p[0],y=p[1],g=c?y:d,b=!1,m="",w=0,x=0,O=0,j=V(K.nodes(t,{at:o,reverse:c,voids:f})),e.prev=14,j.s();case 16:if((A=j.n()).done){e.next=51;break}if(_=h(A.value,2),P=_[0],k=_[1],!U.isElement(P)){e.next=26;break}if(f||!t.isVoid(P)){e.next=23;break}return e.next=22,K.start(t,k);case 22:return e.abrupt("continue",49);case 23:if(!t.isInline(P)){e.next=25;break}return e.abrupt("continue",49);case 25:K.hasInlines(t,P)&&(F=et.isAncestor(k,y.path)?y:K.end(t,k),S=et.isAncestor(k,d.path)?d:K.start(t,k),m=K.string(t,{anchor:S,focus:F},{voids:f}),m=c?D(m):m,b=!0);case 26:if(!_i.isText(P)){e.next=49;break}if((N=et.equals(k,g.path))?(x=c?g.offset:P.text.length-g.offset,O=g.offset):(x=P.text.length,O=c?x:0),!N&&!b&&"offset"!==a){e.next=33;break}return e.next=32,{path:k,offset:O};case 32:b=!1;case 33:if(0!==w){e.next=39;break}if(""!==m){e.next=37;break}return e.abrupt("break",49);case 37:w=C(m,a),m=m.slice(w);case 39:if(O=c?O-w:O+w,!((x-=w)<0)){e.next=44;break}return w=-x,e.abrupt("break",49);case 44:return w=0,e.next=47,{path:k,offset:O};case 47:e.next=33;break;case 49:e.next=16;break;case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(14),j.e(e.t0);case 56:return e.prev=56,j.f(),e.finish(56);case 59:case"end":return e.stop()}}),e,null,[[14,53,56,59]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,u=t.at,c=void 0===u?e.selection:u;if(c){var s=K.before(e,c,{voids:i});if(s){var f=K.first(e,[]),l=h(f,2),v=l[1],p=[s.path,v];if(et.isPath(c)&&0===c.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(et.isPath(c)){var d=K.parent(e,c),y=h(d,1),g=y[0];a=function(e){return g.children.includes(e)}}else a=function(){return!0};var b=K.nodes(e,{reverse:!0,at:p,match:a,mode:n,voids:i}),m=h(b,1),w=m[0];return w}}},range:function(e,t,r){return ut.isRange(t)&&!r?t:{anchor:K.start(e,t),focus:K.end(e,r||t)}},rangeRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return K.rangeRefs(e).delete(i),i.current=null,t}},a=K.rangeRefs(e);return a.add(i),i},rangeRefs:function(e){var t=w.get(e);return t||(t=new Set,w.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},start:function(e,t){return K.point(e,t,{edge:"start"})},string:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.voids,i=void 0!==o&&o,a=K.range(e,t),u=ut.edges(a),c=h(u,2),s=c[0],f=c[1],l="",v=V(K.nodes(e,{at:a,match:_i.isText,voids:i}));try{for(v.s();!(r=v.n()).done;){var p=h(r.value,2),d=p[0],y=p[1],g=d.text;et.equals(y,f.path)&&(g=g.slice(0,f.offset)),et.equals(y,s.path)&&(g=g.slice(s.offset)),l+=g}}catch(e){v.e(e)}finally{v.f()}return l},unhangRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.voids,o=void 0!==n&&n,i=ut.edges(t),a=h(i,2),u=a[0],c=a[1];if(0!==u.offset||0!==c.offset||ut.isCollapsed(t))return t;var s,f=K.above(e,{at:c,match:function(t){return K.isBlock(e,t)}}),l=f?f[1]:[],v=K.start(e,[]),p={anchor:v,focus:c},d=!0,y=V(K.nodes(e,{at:p,match:_i.isText,reverse:!0,voids:o}));try{for(y.s();!(s=y.n()).done;){var g=h(s.value,2),b=g[0],m=g[1];if(d)d=!1;else if(""!==b.text||et.isBefore(m,l)){c={path:m,offset:b.text.length};break}}}catch(e){y.e(e)}finally{y.f()}return{anchor:u,focus:c}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K.above(e,$($({},t),{},{match:function(t){return K.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var r=K.isNormalizing(e);g.set(e,!1),t(),g.set(e,r),K.normalize(e)}},Y={isLocation:function(e){return et.isPath(e)||ot.isPoint(e)||ut.isRange(e)}},Z={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(et.isPath)}};function X(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function H(e){return!!e&&!!e[Ie]}function Q(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[Re]||!!e.constructor[Re]||oe(e)||ie(e))}function ee(e,t,r){void 0===r&&(r=!1),0===te(e)?(r?Object.keys:Me)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function te(e){var t=e[Ie];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:oe(e)?2:ie(e)?3:0}function re(e,t){return 2===te(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ne(e,t,r){var n=te(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function oe(e){return Ne&&e instanceof Map}function ie(e){return Ce&&e instanceof Set}function ae(e){return e.o||e.t}function ue(e){if(Array.isArray(e))return e.slice();var t=ze(e);delete t[Ie];for(var r=Me(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function ce(e,t){fe(e)||H(e)||!Q(e)||(te(e)>1&&(e.set=e.add=e.clear=e.delete=se),Object.freeze(e),t&&ee(e,(function(e,t){return ce(t,!0)}),!0))}function se(){X(2)}function fe(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function le(e){var t=qe[e];return t||X(19,e),t}function ve(){return Se}function he(e,t){t&&(le("Patches"),e.u=[],e.s=[],e.v=t)}function pe(e){de(e),e.p.forEach(ge),e.p=null}function de(e){e===Se&&(Se=e.l)}function ye(e){return Se={p:[],l:Se,h:e,m:!0,_:0}}function ge(e){var t=e[Ie];0===t.i||1===t.i?t.j():t.g=!0}function be(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||le("ES5").S(t,e,n),n?(r[Ie].P&&(pe(t),X(4)),Q(e)&&(e=me(t,e),t.l||xe(t,e)),t.u&&le("Patches").M(r[Ie],e,t.u,t.s)):e=me(t,r,[]),pe(t),t.u&&t.v(t.u,t.s),e!==Te?e:void 0}function me(e,t,r){if(fe(t))return t;var n=t[Ie];if(!n)return ee(t,(function(o,i){return we(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return xe(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=ue(n.k):n.o;ee(3===n.i?new Set(o):o,(function(t,i){return we(e,n,o,t,i,r)})),xe(e,o,!1),r&&e.u&&le("Patches").R(n,r,e.u,e.s)}return n.o}function we(e,t,r,n,o,i){if(H(o)){var a=me(e,o,i&&t&&3!==t.i&&!re(t.D,n)?i.concat(n):void 0);if(ne(r,n,a),!H(a))return;e.m=!1}if(Q(o)&&!fe(o)){if(!e.h.N&&e._<1)return;me(e,o),t&&t.A.l||xe(e,o)}}function xe(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&ce(t,r)}function Oe(e,t){var r=e[Ie];return(r?ae(r):e)[t]}function je(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Ae(e){e.P||(e.P=!0,e.l&&Ae(e.l))}function _e(e){e.o||(e.o=ue(e.t))}function Pe(e,t,r){var n=oe(t)?le("MapSet").T(t,r):ie(t)?le("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:ve(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=Le;r&&(o=[n],i=Ue);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return n.k=c,n.j=u,c}(t,r):le("ES5").J(t,r);return(r?r.A:ve()).p.push(n),n}function ke(e){return H(e)||X(22,e),function e(t){if(!Q(t))return t;var r,n=t[Ie],o=te(t);if(n){if(!n.P&&(n.i<4||!le("ES5").K(n)))return n.t;n.I=!0,r=Ee(t,o),n.I=!1}else r=Ee(t,o);return ee(r,(function(t,o){n&&function(e,t){return 2===te(e)?e.get(t):e[t]}(n.t,t)===o||ne(r,t,e(o))})),3===o?new Set(r):r}(e)}function Ee(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ue(e)}var Fe,Se,De="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ne="undefined"!=typeof Map,Ce="undefined"!=typeof Set,Be="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Te=De?Symbol.for("immer-nothing"):((Fe={})["immer-nothing"]=!0,Fe),Re=De?Symbol.for("immer-draftable"):"__$immer_draftable",Ie=De?Symbol.for("immer-state"):"__$immer_state",Me="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ze=Object.getOwnPropertyDescriptors||function(e){var t={};return Me(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},qe={},Le={get:function(e,t){if(t===Ie)return e;var r=ae(e);if(!re(r,t))return function(e,t,r){var n,o=je(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!Q(n)?n:n===Oe(e.t,t)?(_e(e),e.o[t]=Pe(e.A.h,n,e)):n},has:function(e,t){return t in ae(e)},ownKeys:function(e){return Reflect.ownKeys(ae(e))},set:function(e,t,r){var n=je(ae(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(e.D[t]=!0,!e.P){if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,Oe(ae(e),t))&&(void 0!==r||re(e.t,t)))return!0;_e(e),Ae(e)}return e.o[t]=r,!0},deleteProperty:function(e,t){return void 0!==Oe(e.t,t)||t in e.t?(e.D[t]=!1,_e(e),Ae(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=ae(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){X(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){X(12)}},Ue={};ee(Le,(function(e,t){Ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ue.deleteProperty=function(e,t){return Le.deleteProperty.call(this,e[0],t)},Ue.set=function(e,t,r){return Le.set.call(this,e[0],t,r,e[0])};var We=new(function(){function e(e){this.O=Be,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var o=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,a=Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];return o.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(a))}))}}var i;if("function"!=typeof t&&X(6),void 0!==r&&"function"!=typeof r&&X(7),Q(e)){var a=ye(this),u=Pe(this,e,void 0),c=!0;try{i=t(u),c=!1}finally{c?pe(a):de(a)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return he(a,r),be(e,a)}),(function(e){throw pe(a),e})):(he(a,r),be(i,a))}if(!e||"object"!=typeof e){if((i=t(e))===Te)return;return void 0===i&&(i=e),this.N&&ce(i,!0),i}X(21,e)},t.produceWithPatches=function(e,t){var r,n,o=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){Q(e)||X(8),H(e)&&(e=ke(e));var t=ye(this),r=Pe(this,e,void 0);return r[Ie].C=!0,de(t),r},t.finishDraft=function(e,t){var r=(e&&e[Ie]).A;return he(r,t),be(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!Be&&X(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var o=le("Patches").$;return H(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),$e=We.produce,Ve=(We.produceWithPatches.bind(We),We.setAutoFreeze.bind(We),We.setUseProxies.bind(We),We.applyPatches.bind(We),We.createDraft.bind(We)),Je=We.finishDraft.bind(We);function Ge(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye=new WeakMap,Ze={ancestor:function(e,t){var r=Ze.get(e,t);if(_i.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},ancestors:E.mark((function e(t,r){var n,o,i,a,u,c,s=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>2&&void 0!==s[2]?s[2]:{},o=Ge(et.ancestors(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return a=i.value,u=Ze.ancestor(t,a),c=[u,a],e.next=10,c;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(_i.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},children:E.mark((function(e,t){var r,n,o,i,a,u,c,s,f=arguments;return E.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},n=r.reverse,o=void 0!==n&&n,i=Ze.ancestor(e,t),a=i.children,u=o?a.length-1:0;case 5:if(!(o?u>=0:u<a.length)){l.next=13;break}return c=Ze.child(i,u),s=t.concat(u),l.next=10,[c,s];case 10:u=o?u-1:u+1,l.next=5;break;case 13:case"end":return l.stop()}}),a)})),common:function(e,t,r){var n=et.common(t,r);return[Ze.get(e,n),n]},descendant:function(e,t){var r=Ze.get(e,t);if(K.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},descendants:E.mark((function e(t){var r,n,o,i,a,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=Ge(Ze.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],0===(u=i[1]).length){e.next=9;break}return e.next=9,[a,u];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:E.mark((function e(t){var r,n,o,i,a,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=Ge(Ze.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],u=i[1],!U.isElement(a)){e.next=9;break}return e.next=9,[a,u];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){if(U.isAncestor(e)){e.children;return k(e,["children"])}e.text;return k(e,["text"])},first:function(e,t){for(var r=t.slice(),n=Ze.get(e,r);n&&!_i.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment:function(e,t){if(_i.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return $e({children:e.children},(function(e){var r,n=ut.edges(t),o=h(n,2),i=o[0],a=o[1],u=Ge(Ze.nodes(e,{reverse:!0,pass:function(e){var r=h(e,2)[1];return!ut.includes(t,r)}}));try{for(u.s();!(r=u.n()).done;){var c=h(r.value,2)[1];if(!ut.includes(t,c)){var s=Ze.parent(e,c),f=c[c.length-1];s.children.splice(f,1)}if(et.equals(c,a.path)){var l=Ze.leaf(e,c);l.text=l.text.slice(0,a.offset)}if(et.equals(c,i.path)){var v=Ze.leaf(e,c);v.text=v.text.slice(i.offset)}}}catch(e){u.e(e)}finally{u.f()}K.isEditor(e)&&(e.selection=null)})).children},get:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(_i.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(_i.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:function(e){return _i.isText(e)||U.isElement(e)||K.isEditor(e)},isNodeList:function(e){if(!Array.isArray(e))return!1;var t=Ye.get(e);if(void 0!==t)return t;var r=e.every((function(e){return Ze.isNode(e)}));return Ye.set(e,r),r},last:function(e,t){for(var r=t.slice(),n=Ze.get(e,r);n&&!_i.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf:function(e,t){var r=Ze.get(e,t);if(!_i.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},levels:E.mark((function e(t,r){var n,o,i,a,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>2&&void 0!==c[2]?c[2]:{},o=Ge(et.levels(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=11;break}return a=i.value,u=Ze.get(t,a),e.next=9,[u,a];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return U.isElement(e)&&U.isElementProps(t)&&U.matches(e,t)||_i.isText(e)&&_i.isTextProps(t)&&_i.matches(e,t)},nodes:E.mark((function e(t){var r,n,o,i,a,u,c,s,f,l,v,h,p,d=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},n=r.pass,o=r.reverse,i=void 0!==o&&o,a=r.from,u=void 0===a?[]:a,c=r.to,s=new Set,f=[],l=t;case 6:if(!c||!(i?et.isBefore(f,c):et.isAfter(f,c))){e.next=9;break}return e.abrupt("break",37);case 9:if(s.has(l)){e.next=12;break}return e.next=12,[l,f];case 12:if(s.has(l)||_i.isText(l)||0===l.children.length||null!=n&&!1!==n([l,f])){e.next=19;break}return s.add(l),v=i?l.children.length-1:0,et.isAncestor(f,u)&&(v=u[f.length]),f=f.concat(v),l=Ze.get(t,f),e.abrupt("continue",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt("break",37);case 21:if(i){e.next=27;break}if(h=et.next(f),!Ze.has(t,h)){e.next=27;break}return f=h,l=Ze.get(t,f),e.abrupt("continue",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return p=et.previous(f),f=p,l=Ze.get(t,f),e.abrupt("continue",6);case 32:f=et.parent(f),l=Ze.get(t,f),s.add(l),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var r=et.parent(t),n=Ze.get(e,r);if(_i.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:function(e){return _i.isText(e)?e.text:e.children.map(Ze.string).join("")},texts:E.mark((function e(t){var r,n,o,i,a,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>1&&void 0!==c[1]?c[1]:{},n=Ge(Ze.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],u=i[1],!_i.isText(a)){e.next=9;break}return e.next=9,[a,u];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe={isNodeOperation:function(e){return Qe.isOperation(e)&&e.type.endsWith("_node")},isOperation:function(e){if(!S(e))return!1;switch(e.type){case"insert_node":return et.isPath(e.path)&&Ze.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&et.isPath(e.path);case"merge_node":return"number"==typeof e.position&&et.isPath(e.path)&&S(e.properties);case"move_node":return et.isPath(e.path)&&et.isPath(e.newPath);case"remove_node":return et.isPath(e.path)&&Ze.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&et.isPath(e.path);case"set_node":return et.isPath(e.path)&&S(e.properties)&&S(e.newProperties);case"set_selection":return null===e.properties&&ut.isRange(e.newProperties)||null===e.newProperties&&ut.isRange(e.properties)||S(e.properties)&&S(e.newProperties);case"split_node":return et.isPath(e.path)&&"number"==typeof e.position&&S(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&e.every((function(e){return Qe.isOperation(e)}))},isSelectionOperation:function(e){return Qe.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation:function(e){return Qe.isOperation(e)&&e.type.endsWith("_text")},inverse:function(e){switch(e.type){case"insert_node":return He(He({},e),{},{type:"remove_node"});case"insert_text":return He(He({},e),{},{type:"remove_text"});case"merge_node":return He(He({},e),{},{type:"split_node",path:et.previous(e.path)});case"move_node":var t=e.newPath,r=e.path;if(et.equals(t,r))return e;if(et.isSibling(r,t))return He(He({},e),{},{path:t,newPath:r});var n=et.transform(r,e),o=et.transform(et.next(r),e);return He(He({},e),{},{path:n,newPath:o});case"remove_node":return He(He({},e),{},{type:"insert_node"});case"remove_text":return He(He({},e),{},{type:"insert_text"});case"set_node":var i=e.properties,a=e.newProperties;return He(He({},e),{},{properties:a,newProperties:i});case"set_selection":var u=e.properties,c=e.newProperties;return He(He({},e),{},null==u?{properties:c,newProperties:null}:null==c?{properties:null,newProperties:u}:{properties:c,newProperties:u});case"split_node":return He(He({},e),{},{type:"merge_node",path:et.next(e.path)})}}},et={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=et.levels(e,t);return o=n?o.slice(1):o.slice(0,-1)},common:function(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return et.equals(n,o)&&i>a},endsAt:function(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return et.equals(n,o)},endsBefore:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return et.equals(n,o)&&i<a},equals:function(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===et.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===et.compare(e,t)},isBefore:function(e,t){return-1===et.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===et.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===et.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===et.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===et.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&et.equals(r,n)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=[],i=0;i<=e.length;i++)o.push(e.slice(0,i));return n&&o.reverse(),o},next:function(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!et.isAncestor(t,e)&&!et.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $e(e,(function(n){var o=r.affinity,i=void 0===o?"forward":o;if(0!==e.length)switch(t.type){case"insert_node":var a=t.path;(et.equals(a,n)||et.endsBefore(a,n)||et.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var u=t.path;if(et.equals(u,n)||et.isAncestor(u,n))return null;et.endsBefore(u,n)&&(n[u.length-1]-=1);break;case"merge_node":var c=t.path,s=t.position;et.equals(c,n)||et.endsBefore(c,n)?n[c.length-1]-=1:et.isAncestor(c,n)&&(n[c.length-1]-=1,n[c.length]+=s);break;case"split_node":var f=t.path,l=t.position;if(et.equals(f,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else et.endsBefore(f,n)?n[f.length-1]+=1:et.isAncestor(f,n)&&e[f.length]>=l&&(n[f.length-1]+=1,n[f.length]-=l);break;case"move_node":var v=t.path,h=t.newPath;if(et.equals(v,h))return;if(et.isAncestor(v,n)||et.equals(v,n)){var p=h.slice();return et.endsBefore(v,h)&&v.length<h.length&&(p[v.length-1]-=1),p.concat(n.slice(v.length))}et.isSibling(v,h)&&(et.isAncestor(h,n)||et.equals(h,n))?et.endsBefore(v,n)?n[v.length-1]-=1:n[v.length-1]+=1:et.endsBefore(h,n)||et.equals(h,n)||et.isAncestor(h,n)?(et.endsBefore(v,n)&&(n[v.length-1]-=1),n[h.length-1]+=1):et.endsBefore(v,n)&&(et.equals(h,n)&&(n[h.length-1]+=1),n[v.length-1]-=1)}}))}},tt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=et.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ot={compare:function(e,t){var r=et.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:function(e,t){return 1===ot.compare(e,t)},isBefore:function(e,t){return-1===ot.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&et.equals(e.path,t.path)},isPoint:function(e){return S(e)&&"number"==typeof e.offset&&et.isPath(e.path)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $e(e,(function(e){var n=r.affinity,o=void 0===n?"forward":n,i=e.path,a=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=et.transform(i,t,r);break;case"insert_text":et.equals(t.path,i)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":et.equals(t.path,i)&&(e.offset+=t.position),e.path=et.transform(i,t,r);break;case"remove_text":et.equals(t.path,i)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(et.equals(t.path,i)||et.isAncestor(t.path,i))return null;e.path=et.transform(i,t,r);break;case"split_node":if(et.equals(t.path,i)){if(t.position===a&&null==o)return null;(t.position<a||t.position===a&&"forward"===o)&&(e.offset-=t.position,e.path=et.transform(i,t,nt(nt({},r),{},{affinity:"forward"})))}else e.path=et.transform(i,t,r)}}))}},it={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=ot.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ut={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=e.anchor,i=e.focus;return ut.isBackward(e)===n?[o,i]:[i,o]},end:function(e){var t=ut.edges(e),r=h(t,2)[1];return r},equals:function(e,t){return ot.equals(e.anchor,t.anchor)&&ot.equals(e.focus,t.focus)},includes:function(e,t){if(ut.isRange(t)){if(ut.includes(e,t.anchor)||ut.includes(e,t.focus))return!0;var r=ut.edges(e),n=h(r,2),o=n[0],i=n[1],a=ut.edges(t),u=h(a,2),c=u[0],s=u[1];return ot.isBefore(o,c)&&ot.isAfter(i,s)}var f=ut.edges(e),l=h(f,2),v=l[0],p=l[1],d=!1,y=!1;return ot.isPoint(t)?(d=ot.compare(t,v)>=0,y=ot.compare(t,p)<=0):(d=et.compare(t,v.path)>=0,y=et.compare(t,p.path)<=0),d&&y},intersection:function(e,t){e.anchor,e.focus;var r=k(e,["anchor","focus"]),n=ut.edges(e),o=h(n,2),i=o[0],a=o[1],u=ut.edges(t),c=h(u,2),s=c[0],f=c[1],l=ot.isBefore(i,s)?s:i,v=ot.isBefore(a,f)?a:f;return ot.isBefore(v,l)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:l,focus:v},r)},isBackward:function(e){var t=e.anchor,r=e.focus;return ot.isAfter(t,r)},isCollapsed:function(e){var t=e.anchor,r=e.focus;return ot.equals(t,r)},isExpanded:function(e){return!ut.isCollapsed(e)},isForward:function(e){return!ut.isBackward(e)},isRange:function(e){return S(e)&&ot.isPoint(e.anchor)&&ot.isPoint(e.focus)},points:E.mark((function e(t){return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=ut.edges(e),r=h(t,1)[0];return r},transform:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.affinity,a=void 0===i?"inward":i;return"inward"===a?ut.isForward(e)?(r="forward",n="backward"):(r="backward",n="forward"):"outward"===a?ut.isForward(e)?(r="backward",n="forward"):(r="forward",n="backward"):(r=a,n=a),$e(e,(function(e){var o=ot.transform(e.anchor,t,{affinity:r}),i=ot.transform(e.focus,t,{affinity:n});if(!o||!i)return null;e.anchor=o,e.focus=i}))}},ct={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=ut.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};var st=function(){this.__data__=[],this.size=0};var ft=function(e,t){return e===t||e!=e&&t!=t};var lt=function(e,t){for(var r=e.length;r--;)if(ft(e[r][0],t))return r;return-1},vt=Array.prototype.splice;var ht=function(e){var t=this.__data__,r=lt(t,e);return!(r<0)&&(r==t.length-1?t.pop():vt.call(t,r,1),--this.size,!0)};var pt=function(e){var t=this.__data__,r=lt(t,e);return r<0?void 0:t[r][1]};var dt=function(e){return lt(this.__data__,e)>-1};var yt=function(e,t){var r=this.__data__,n=lt(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function gt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gt.prototype.clear=st,gt.prototype.delete=ht,gt.prototype.get=pt,gt.prototype.has=dt,gt.prototype.set=yt;var bt=gt;var mt=function(){this.__data__=new bt,this.size=0};var wt=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var xt=function(e){return this.__data__.get(e)};var Ot=function(e){return this.__data__.has(e)},jt="object"==typeof t&&t&&t.Object===Object&&t,At="object"==typeof self&&self&&self.Object===Object&&self,_t=jt||At||Function("return this")(),Pt=_t.Symbol,kt=Object.prototype,Et=kt.hasOwnProperty,Ft=kt.toString,St=Pt?Pt.toStringTag:void 0;var Dt=function(e){var t=Et.call(e,St),r=e[St];try{e[St]=void 0;var n=!0}catch(e){}var o=Ft.call(e);return n&&(t?e[St]=r:delete e[St]),o},Nt=Object.prototype.toString;var Ct=function(e){return Nt.call(e)},Bt=Pt?Pt.toStringTag:void 0;var Tt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Bt&&Bt in Object(e)?Dt(e):Ct(e)};var Rt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var It,Mt=function(e){if(!Rt(e))return!1;var t=Tt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},zt=_t["__core-js_shared__"],qt=(It=/[^.]+$/.exec(zt&&zt.keys&&zt.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"";var Lt=function(e){return!!qt&&qt in e},Ut=Function.prototype.toString;var Wt=function(e){if(null!=e){try{return Ut.call(e)}catch(e){}try{return e+""}catch(e){}}return""},$t=/^\[object .+?Constructor\]$/,Vt=Function.prototype,Jt=Object.prototype,Gt=Vt.toString,Kt=Jt.hasOwnProperty,Yt=RegExp("^"+Gt.call(Kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Zt=function(e){return!(!Rt(e)||Lt(e))&&(Mt(e)?Yt:$t).test(Wt(e))};var Xt=function(e,t){return null==e?void 0:e[t]};var Ht=function(e,t){var r=Xt(e,t);return Zt(r)?r:void 0},Qt=Ht(_t,"Map"),er=Ht(Object,"create");var tr=function(){this.__data__=er?er(null):{},this.size=0};var rr=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nr=Object.prototype.hasOwnProperty;var or=function(e){var t=this.__data__;if(er){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nr.call(t,e)?t[e]:void 0},ir=Object.prototype.hasOwnProperty;var ar=function(e){var t=this.__data__;return er?void 0!==t[e]:ir.call(t,e)};var ur=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=er&&void 0===t?"__lodash_hash_undefined__":t,this};function cr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}cr.prototype.clear=tr,cr.prototype.delete=rr,cr.prototype.get=or,cr.prototype.has=ar,cr.prototype.set=ur;var sr=cr;var fr=function(){this.size=0,this.__data__={hash:new sr,map:new(Qt||bt),string:new sr}};var lr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var vr=function(e,t){var r=e.__data__;return lr(t)?r["string"==typeof t?"string":"hash"]:r.map};var hr=function(e){var t=vr(this,e).delete(e);return this.size-=t?1:0,t};var pr=function(e){return vr(this,e).get(e)};var dr=function(e){return vr(this,e).has(e)};var yr=function(e,t){var r=vr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gr.prototype.clear=fr,gr.prototype.delete=hr,gr.prototype.get=pr,gr.prototype.has=dr,gr.prototype.set=yr;var br=gr;var mr=function(e,t){var r=this.__data__;if(r instanceof bt){var n=r.__data__;if(!Qt||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new br(n)}return r.set(e,t),this.size=r.size,this};function wr(e){var t=this.__data__=new bt(e);this.size=t.size}wr.prototype.clear=mt,wr.prototype.delete=wt,wr.prototype.get=xt,wr.prototype.has=Ot,wr.prototype.set=mr;var xr=wr;var Or=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var jr=function(e){return this.__data__.has(e)};function Ar(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new br;++t<r;)this.add(e[t])}Ar.prototype.add=Ar.prototype.push=Or,Ar.prototype.has=jr;var _r=Ar;var Pr=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var kr=function(e,t){return e.has(t)};var Er=function(e,t,r,n,o,i){var a=1&r,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(e);if(s&&i.get(t))return s==t;var f=-1,l=!0,v=2&r?new _r:void 0;for(i.set(e,t),i.set(t,e);++f<u;){var h=e[f],p=t[f];if(n)var d=a?n(p,h,f,t,e,i):n(h,p,f,e,t,i);if(void 0!==d){if(d)continue;l=!1;break}if(v){if(!Pr(t,(function(e,t){if(!kr(v,t)&&(h===e||o(h,e,r,n,i)))return v.push(t)}))){l=!1;break}}else if(h!==p&&!o(h,p,r,n,i)){l=!1;break}}return i.delete(e),i.delete(t),l},Fr=_t.Uint8Array;var Sr=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var Dr=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Nr=Pt?Pt.prototype:void 0,Cr=Nr?Nr.valueOf:void 0;var Br=function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Fr(e),new Fr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ft(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=Sr;case"[object Set]":var c=1&n;if(u||(u=Dr),e.size!=t.size&&!c)return!1;var s=a.get(e);if(s)return s==t;n|=2,a.set(e,t);var f=Er(u(e),u(t),n,o,i,a);return a.delete(e),f;case"[object Symbol]":if(Cr)return Cr.call(e)==Cr.call(t)}return!1};var Tr=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Rr=Array.isArray;var Ir=function(e,t,r){var n=t(e);return Rr(e)?n:Tr(n,r(e))};var Mr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i};var zr=function(){return[]},qr=Object.prototype.propertyIsEnumerable,Lr=Object.getOwnPropertySymbols,Ur=Lr?function(e){return null==e?[]:(e=Object(e),Mr(Lr(e),(function(t){return qr.call(e,t)})))}:zr;var Wr=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var $r=function(e){return null!=e&&"object"==typeof e};var Vr=function(e){return $r(e)&&"[object Arguments]"==Tt(e)},Jr=Object.prototype,Gr=Jr.hasOwnProperty,Kr=Jr.propertyIsEnumerable,Yr=Vr(function(){return arguments}())?Vr:function(e){return $r(e)&&Gr.call(e,"callee")&&!Kr.call(e,"callee")};var Zr=function(){return!1},Xr=n((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?_t.Buffer:void 0,i=(o?o.isBuffer:void 0)||Zr;e.exports=i})),Hr=/^(?:0|[1-9]\d*)$/;var Qr=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Hr.test(e))&&e>-1&&e%1==0&&e<t};var en=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},tn={};tn["[object Float32Array]"]=tn["[object Float64Array]"]=tn["[object Int8Array]"]=tn["[object Int16Array]"]=tn["[object Int32Array]"]=tn["[object Uint8Array]"]=tn["[object Uint8ClampedArray]"]=tn["[object Uint16Array]"]=tn["[object Uint32Array]"]=!0,tn["[object Arguments]"]=tn["[object Array]"]=tn["[object ArrayBuffer]"]=tn["[object Boolean]"]=tn["[object DataView]"]=tn["[object Date]"]=tn["[object Error]"]=tn["[object Function]"]=tn["[object Map]"]=tn["[object Number]"]=tn["[object Object]"]=tn["[object RegExp]"]=tn["[object Set]"]=tn["[object String]"]=tn["[object WeakMap]"]=!1;var rn=function(e){return $r(e)&&en(e.length)&&!!tn[Tt(e)]};var nn=function(e){return function(t){return e(t)}},on=n((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&jt.process,i=function(){try{var e=n&&n.require&&n.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i})),an=on&&on.isTypedArray,un=an?nn(an):rn,cn=Object.prototype.hasOwnProperty;var sn=function(e,t){var r=Rr(e),n=!r&&Yr(e),o=!r&&!n&&Xr(e),i=!r&&!n&&!o&&un(e),a=r||n||o||i,u=a?Wr(e.length,String):[],c=u.length;for(var s in e)!t&&!cn.call(e,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Qr(s,c))||u.push(s);return u},fn=Object.prototype;var ln=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||fn)};var vn=function(e,t){return function(r){return e(t(r))}},hn=vn(Object.keys,Object),pn=Object.prototype.hasOwnProperty;var dn=function(e){if(!ln(e))return hn(e);var t=[];for(var r in Object(e))pn.call(e,r)&&"constructor"!=r&&t.push(r);return t};var yn=function(e){return null!=e&&en(e.length)&&!Mt(e)};var gn=function(e){return yn(e)?sn(e):dn(e)};var bn=function(e){return Ir(e,gn,Ur)},mn=Object.prototype.hasOwnProperty;var wn=function(e,t,r,n,o,i){var a=1&r,u=bn(e),c=u.length;if(c!=bn(t).length&&!a)return!1;for(var s=c;s--;){var f=u[s];if(!(a?f in t:mn.call(t,f)))return!1}var l=i.get(e);if(l&&i.get(t))return l==t;var v=!0;i.set(e,t),i.set(t,e);for(var h=a;++s<c;){var p=e[f=u[s]],d=t[f];if(n)var y=a?n(d,p,f,t,e,i):n(p,d,f,e,t,i);if(!(void 0===y?p===d||o(p,d,r,n,i):y)){v=!1;break}h||(h="constructor"==f)}if(v&&!h){var g=e.constructor,b=t.constructor;g==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof b&&b instanceof b||(v=!1)}return i.delete(e),i.delete(t),v},xn=Ht(_t,"DataView"),On=Ht(_t,"Promise"),jn=Ht(_t,"Set"),An=Ht(_t,"WeakMap"),_n="[object Map]",Pn="[object Promise]",kn="[object Set]",En="[object WeakMap]",Fn="[object DataView]",Sn=Wt(xn),Dn=Wt(Qt),Nn=Wt(On),Cn=Wt(jn),Bn=Wt(An),Tn=Tt;(xn&&Tn(new xn(new ArrayBuffer(1)))!=Fn||Qt&&Tn(new Qt)!=_n||On&&Tn(On.resolve())!=Pn||jn&&Tn(new jn)!=kn||An&&Tn(new An)!=En)&&(Tn=function(e){var t=Tt(e),r="[object Object]"==t?e.constructor:void 0,n=r?Wt(r):"";if(n)switch(n){case Sn:return Fn;case Dn:return _n;case Nn:return Pn;case Cn:return kn;case Bn:return En}return t});var Rn=Tn,In="[object Arguments]",Mn="[object Array]",zn="[object Object]",qn=Object.prototype.hasOwnProperty;var Ln=function(e,t,r,n,o,i){var a=Rr(e),u=Rr(t),c=a?Mn:Rn(e),s=u?Mn:Rn(t),f=(c=c==In?zn:c)==zn,l=(s=s==In?zn:s)==zn,v=c==s;if(v&&Xr(e)){if(!Xr(t))return!1;a=!0,f=!1}if(v&&!f)return i||(i=new xr),a||un(e)?Er(e,t,r,n,o,i):Br(e,t,c,r,n,o,i);if(!(1&r)){var h=f&&qn.call(e,"__wrapped__"),p=l&&qn.call(t,"__wrapped__");if(h||p){var d=h?e.value():e,y=p?t.value():t;return i||(i=new xr),o(d,y,r,n,i)}}return!!v&&(i||(i=new xr),wn(e,t,r,n,o,i))};var Un=function e(t,r,n,o,i){return t===r||(null==t||null==r||!$r(t)&&!$r(r)?t!=t&&r!=r:Ln(t,r,n,o,e,i))};var Wn=function(e,t){return Un(e,t)};var $n=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o};var Vn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Jn=function(){try{var e=Ht(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Gn=function(e,t,r){"__proto__"==t&&Jn?Jn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},Kn=Object.prototype.hasOwnProperty;var Yn=function(e,t,r){var n=e[t];Kn.call(e,t)&&ft(n,r)&&(void 0!==r||t in e)||Gn(e,t,r)};var Zn=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var u=t[i],c=n?n(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),o?Gn(r,u,c):Yn(r,u,c)}return r};var Xn=function(e,t){return e&&Zn(t,gn(t),e)};var Hn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Qn=Object.prototype.hasOwnProperty;var eo=function(e){if(!Rt(e))return Hn(e);var t=ln(e),r=[];for(var n in e)("constructor"!=n||!t&&Qn.call(e,n))&&r.push(n);return r};var to=function(e){return yn(e)?sn(e,!0):eo(e)};var ro=function(e,t){return e&&Zn(t,to(t),e)},no=n((function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?_t.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}}));var oo=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var io=function(e,t){return Zn(e,Ur(e),t)},ao=vn(Object.getPrototypeOf,Object),uo=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Tr(t,Ur(e)),e=ao(e);return t}:zr;var co=function(e,t){return Zn(e,uo(e),t)};var so=function(e){return Ir(e,to,uo)},fo=Object.prototype.hasOwnProperty;var lo=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&fo.call(e,"index")&&(r.index=e.index,r.input=e.input),r};var vo=function(e){var t=new e.constructor(e.byteLength);return new Fr(t).set(new Fr(e)),t};var ho=function(e,t){var r=t?vo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},po=/\w*$/;var yo=function(e){var t=new e.constructor(e.source,po.exec(e));return t.lastIndex=e.lastIndex,t},go=Pt?Pt.prototype:void 0,bo=go?go.valueOf:void 0;var mo=function(e){return bo?Object(bo.call(e)):{}};var wo=function(e,t){var r=t?vo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var xo=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return vo(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return ho(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return wo(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return yo(e);case"[object Set]":return new n;case"[object Symbol]":return mo(e)}},Oo=Object.create,jo=function(){function e(){}return function(t){if(!Rt(t))return{};if(Oo)return Oo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Ao=function(e){return"function"!=typeof e.constructor||ln(e)?{}:jo(ao(e))};var _o=function(e){return $r(e)&&"[object Map]"==Rn(e)},Po=on&&on.isMap,ko=Po?nn(Po):_o;var Eo=function(e){return $r(e)&&"[object Set]"==Rn(e)},Fo=on&&on.isSet,So=Fo?nn(Fo):Eo,Do="[object Arguments]",No="[object Function]",Co="[object Object]",Bo={};Bo[Do]=Bo["[object Array]"]=Bo["[object ArrayBuffer]"]=Bo["[object DataView]"]=Bo["[object Boolean]"]=Bo["[object Date]"]=Bo["[object Float32Array]"]=Bo["[object Float64Array]"]=Bo["[object Int8Array]"]=Bo["[object Int16Array]"]=Bo["[object Int32Array]"]=Bo["[object Map]"]=Bo["[object Number]"]=Bo[Co]=Bo["[object RegExp]"]=Bo["[object Set]"]=Bo["[object String]"]=Bo["[object Symbol]"]=Bo["[object Uint8Array]"]=Bo["[object Uint8ClampedArray]"]=Bo["[object Uint16Array]"]=Bo["[object Uint32Array]"]=!0,Bo["[object Error]"]=Bo[No]=Bo["[object WeakMap]"]=!1;var To=function e(t,r,n,o,i,a){var u,c=1&r,s=2&r,f=4&r;if(n&&(u=i?n(t,o,i,a):n(t)),void 0!==u)return u;if(!Rt(t))return t;var l=Rr(t);if(l){if(u=lo(t),!c)return oo(t,u)}else{var v=Rn(t),h=v==No||"[object GeneratorFunction]"==v;if(Xr(t))return no(t,c);if(v==Co||v==Do||h&&!i){if(u=s||h?{}:Ao(t),!c)return s?co(t,ro(u,t)):io(t,Xn(u,t))}else{if(!Bo[v])return i?t:{};u=xo(t,v,c)}}a||(a=new xr);var p=a.get(t);if(p)return p;a.set(t,u),So(t)?t.forEach((function(o){u.add(e(o,r,n,o,t,a))})):ko(t)&&t.forEach((function(o,i){u.set(i,e(o,r,n,i,t,a))}));var d=f?s?so:bn:s?keysIn:gn,y=l?void 0:d(t);return Vn(y||t,(function(o,i){y&&(o=t[i=o]),Yn(u,i,e(o,r,n,i,t,a))})),u};var Ro=function(e){return"symbol"==typeof e||$r(e)&&"[object Symbol]"==Tt(e)},Io=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mo=/^\w*$/;var zo=function(e,t){if(Rr(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ro(e))||(Mo.test(e)||!Io.test(e)||null!=t&&e in Object(t))};function qo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(qo.Cache||br),r}qo.Cache=br;var Lo=qo;var Uo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wo=/\\(\\)?/g,$o=function(e){var t=Lo(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Uo,(function(e,r,n,o){t.push(n?o.replace(Wo,"$1"):r||e)})),t})),Vo=Pt?Pt.prototype:void 0,Jo=Vo?Vo.toString:void 0;var Go=function e(t){if("string"==typeof t)return t;if(Rr(t))return $n(t,e)+"";if(Ro(t))return Jo?Jo.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var Ko=function(e){return null==e?"":Go(e)};var Yo=function(e,t){return Rr(e)?e:zo(e,t)?[e]:$o(Ko(e))};var Zo=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Xo=function(e){if("string"==typeof e||Ro(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Ho=function(e,t){for(var r=0,n=(t=Yo(t,e)).length;null!=e&&r<n;)e=e[Xo(t[r++])];return r&&r==n?e:void 0};var Qo=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i};var ei=function(e,t){return t.length<2?e:Ho(e,Qo(t,0,-1))};var ti=function(e,t){return t=Yo(t,e),null==(e=ei(e,t))||delete e[Xo(Zo(t))]},ri=Function.prototype,ni=Object.prototype,oi=ri.toString,ii=ni.hasOwnProperty,ai=oi.call(Object);var ui=function(e){if(!$r(e)||"[object Object]"!=Tt(e))return!1;var t=ao(e);if(null===t)return!0;var r=ii.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&oi.call(r)==ai};var ci=function(e){return ui(e)?void 0:e},si=Pt?Pt.isConcatSpreadable:void 0;var fi=function(e){return Rr(e)||Yr(e)||!!(si&&e&&e[si])};var li=function e(t,r,n,o,i){var a=-1,u=t.length;for(n||(n=fi),i||(i=[]);++a<u;){var c=t[a];r>0&&n(c)?r>1?e(c,r-1,n,o,i):Tr(i,c):o||(i[i.length]=c)}return i};var vi=function(e){return(null==e?0:e.length)?li(e,1):[]};var hi=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},pi=Math.max;var di=function(e,t,r){return t=pi(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=pi(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(a),hi(e,this,u)}};var yi=function(e){return function(){return e}};var gi=Jn?function(e,t){return Jn(e,"toString",{configurable:!0,enumerable:!1,value:yi(t),writable:!0})}:function(e){return e},bi=Date.now;var mi=function(e){var t=0,r=0;return function(){var n=bi(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(gi);var wi=function(e){return mi(di(e,void 0,vi),e+"")}((function(e,t){var r={};if(null==e)return r;var n=!1;t=$n(t,(function(t){return t=Yo(t,e),n||(n=t.length>1),t})),Zn(e,so(e),r),n&&(r=To(r,7,ci));for(var o=t.length;o--;)ti(r,t[o]);return r}));function xi(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Oi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oi(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ji(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _i={equals:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.loose,o=void 0!==n&&n;return Wn(o?wi(e,"text"):e,o?wi(t,"text"):t)},isText:function(e){return S(e)&&"string"==typeof e.text},isTextList:function(e){return Array.isArray(e)&&e.every((function(e){return _i.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations:function(e,t){var r,n=[Ai({},e)],o=xi(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value,u=(a.anchor,a.focus,k(a,["anchor","focus"])),c=ut.edges(a),s=h(c,2),f=s[0],l=s[1],v=[],p=0,d=xi(n);try{for(d.s();!(i=d.n()).done;){var y=i.value,g=y.text.length,b=p;if(p+=g,f.offset<=b&&l.offset>=p)Object.assign(y,u),v.push(y);else if(f.offset!==l.offset&&(f.offset===p||l.offset===b)||f.offset>p||l.offset<b||l.offset===b&&0!==b)v.push(y);else{var m=y,w=void 0,x=void 0;if(l.offset<p){var O=l.offset-b;x=Ai(Ai({},m),{},{text:m.text.slice(O)}),m=Ai(Ai({},m),{},{text:m.text.slice(0,O)})}if(f.offset>b){var j=f.offset-b;w=Ai(Ai({},m),{},{text:m.text.slice(0,j)}),m=Ai(Ai({},m),{},{text:m.text.slice(j)})}Object.assign(m,u),w&&v.push(w),v.push(m),x&&v.push(x)}}}catch(e){d.e(e)}finally{d.f()}n=v}}catch(e){o.e(e)}finally{o.f()}return n}};function Pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ei(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fi(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Si(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Si(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ni(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ci(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bi={insertNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,u=r.mode,c=void 0===u?"lowest":u,s=r.at,f=r.match,l=r.select;if(Ze.isNode(t)&&(t=[t]),0!==t.length){var v=h(t,1)[0];if(s||(s=e.selection?e.selection:e.children.length>0?K.end(e,[]):[0],l=!0),null==l&&(l=!1),ut.isRange(s))if(o||(s=K.unhangRange(e,s)),ut.isCollapsed(s))s=s.anchor;else{var p=ut.edges(s),d=h(p,2)[1],y=K.pointRef(e,d);Ji.delete(e,{at:s}),s=y.unref()}if(ot.isPoint(s)){null==f&&(f=_i.isText(v)?function(e){return _i.isText(e)}:e.isInline(v)?function(t){return _i.isText(t)||K.isInline(e,t)}:function(t){return K.isBlock(e,t)});var g=K.nodes(e,{at:s.path,match:f,mode:c,voids:a}),b=h(g,1)[0];if(!b)return;var m=h(b,2)[1],w=K.pathRef(e,m),x=K.isEnd(e,s,m);Ji.splitNodes(e,{at:s,match:f,mode:c,voids:a});var O=w.unref();s=x?et.next(O):O}var j=et.parent(s),A=s[s.length-1];if(a||!K.void(e,{at:j})){var _,P=Ni(t);try{for(P.s();!(_=P.n()).done;){var k=_.value,E=j.concat(A);A++,e.apply({type:"insert_node",path:E,node:k})}}catch(e){P.e(e)}finally{P.f()}if(l){var F=K.end(e,s);F&&Ji.select(e,F)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.at,n=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,a=t.voids,u=void 0!==a&&a,c=t.match;if(null==c&&(c=et.isPath(n)?Ii(e,n):function(t){return K.isBlock(e,t)}),n)for(var s=K.nodes(e,{at:n,match:c,mode:i,voids:u}),f=0,l=Array.from(s,(function(t){var r=h(t,2)[1];return K.pathRef(e,r)}));f<l.length;f++){var v=l[f].unref();if(v.length<2)throw new Error("Cannot lift node at a path [".concat(v,"] because it has a depth of less than `2`."));var p=K.node(e,et.parent(v)),d=h(p,2),y=d[0],g=d[1],b=v[v.length-1],m=y.children.length;if(1===m){var w=et.next(g);Ji.moveNodes(e,{at:v,to:w,voids:u}),Ji.removeNodes(e,{at:g,voids:u})}else if(0===b)Ji.moveNodes(e,{at:v,to:g,voids:u});else if(b===m-1){var x=et.next(g);Ji.moveNodes(e,{at:v,to:x,voids:u})}else{var O=et.next(v),j=et.next(g);Ji.splitNodes(e,{at:O,voids:u}),Ji.moveNodes(e,{at:v,to:j,voids:u})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.match,n=t.at,o=void 0===n?e.selection:n,i=t.hanging,a=void 0!==i&&i,u=t.voids,c=void 0!==u&&u,s=t.mode,f=void 0===s?"lowest":s;if(o){if(null==r)if(et.isPath(o)){var l=K.parent(e,o),v=h(l,1)[0];r=function(e){return v.children.includes(e)}}else r=function(t){return K.isBlock(e,t)};if(!a&&ut.isRange(o)&&(o=K.unhangRange(e,o)),ut.isRange(o))if(ut.isCollapsed(o))o=o.anchor;else{var p=ut.edges(o),d=h(p,2)[1],y=K.pointRef(e,d);Ji.delete(e,{at:o}),o=y.unref(),null==t.at&&Ji.select(e,o)}var g=K.nodes(e,{at:o,match:r,voids:c,mode:f}),b=h(g,1)[0],m=K.previous(e,{at:o,match:r,voids:c,mode:f});if(b&&m){var w=h(b,2),x=w[0],O=w[1],j=h(m,2),A=j[0],_=j[1];if(0!==O.length&&0!==_.length){var P,E,F=et.next(_),S=et.common(O,_),D=et.isSibling(O,_),N=Array.from(K.levels(e,{at:O}),(function(e){return h(e,1)[0]})).slice(S.length).slice(0,-1),C=K.above(e,{at:O,mode:"highest",match:function(t){return N.includes(t)&&Ti(e,t)}}),B=C&&K.pathRef(e,C[1]);if(_i.isText(x)&&_i.isText(A)){x.text;var T=k(x,["text"]);E=A.text.length,P=T}else{if(!U.isElement(x)||!U.isElement(A))throw new Error("Cannot merge the node at path [".concat(O,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(x)," ").concat(JSON.stringify(A)));x.children;var R=k(x,["children"]);E=A.children.length,P=R}D||Ji.moveNodes(e,{at:O,to:F,voids:c}),B&&Ji.removeNodes(e,{at:B.current,voids:c}),U.isElement(A)&&K.isEmpty(e,A)||_i.isText(A)&&""===A.text?Ji.removeNodes(e,{at:_,voids:c}):e.apply({type:"merge_node",path:F,position:E,properties:P}),B&&B.unref()}}}}))},moveNodes:function(e,t){K.withoutNormalizing(e,(function(){var r=t.to,n=t.at,o=void 0===n?e.selection:n,i=t.mode,a=void 0===i?"lowest":i,u=t.voids,c=void 0!==u&&u,s=t.match;if(o){null==s&&(s=et.isPath(o)?Ii(e,o):function(t){return K.isBlock(e,t)});for(var f=K.pathRef(e,r),l=K.nodes(e,{at:o,match:s,mode:a,voids:c}),v=0,p=Array.from(l,(function(t){var r=h(t,2)[1];return K.pathRef(e,r)}));v<p.length;v++){var d=p[v].unref(),y=f.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:y}),f.current&&et.isSibling(y,d)&&et.isAfter(y,d)&&(f.current=et.next(f.current))}f.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.hanging,n=void 0!==r&&r,o=t.voids,i=void 0!==o&&o,a=t.mode,u=void 0===a?"lowest":a,c=t.at,s=void 0===c?e.selection:c,f=t.match;if(s){null==f&&(f=et.isPath(s)?Ii(e,s):function(t){return K.isBlock(e,t)}),!n&&ut.isRange(s)&&(s=K.unhangRange(e,s));for(var l=K.nodes(e,{at:s,match:f,mode:u,voids:i}),v=0,p=Array.from(l,(function(t){var r=h(t,2)[1];return K.pathRef(e,r)}));v<p.length;v++){var d=p[v].unref();if(d){var y=K.node(e,d),g=h(y,1)[0];e.apply({type:"remove_node",path:d,node:g})}}}}))},setNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K.withoutNormalizing(e,(function(){var n=r.match,o=r.at,i=void 0===o?e.selection:o,a=r.hanging,u=void 0!==a&&a,c=r.mode,s=void 0===c?"lowest":c,f=r.split,l=void 0!==f&&f,v=r.voids,p=void 0!==v&&v;if(i){if(null==n&&(n=et.isPath(i)?Ii(e,i):function(t){return K.isBlock(e,t)}),!u&&ut.isRange(i)&&(i=K.unhangRange(e,i)),l&&ut.isRange(i)){var d=K.rangeRef(e,i,{affinity:"inward"}),y=ut.edges(i),g=h(y,2),b=g[0],m=g[1],w="lowest"===s?"lowest":"highest",x=K.isEnd(e,m,m.path);Ji.splitNodes(e,{at:m,match:n,mode:w,voids:p,always:!x});var O=K.isStart(e,b,b.path);Ji.splitNodes(e,{at:b,match:n,mode:w,voids:p,always:!O}),i=d.unref(),null==r.at&&Ji.select(e,i)}var j,A=Ni(K.nodes(e,{at:i,match:n,mode:s,voids:p}));try{for(A.s();!(j=A.n()).done;){var _=h(j.value,2),P=_[0],k=_[1],E={},F={};if(0!==k.length){for(var S in t)"children"!==S&&"text"!==S&&t[S]!==P[S]&&(P.hasOwnProperty(S)&&(E[S]=P[S]),F[S]=t[S]);0!==Object.keys(F).length&&e.apply({type:"set_node",path:k,properties:E,newProperties:F})}}}catch(e){A.e(e)}finally{A.f()}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,u=t.at,c=void 0===u?e.selection:u,s=t.height,f=void 0===s?0:s,l=t.always,v=void 0!==l&&l;if(null==a&&(a=function(t){return K.isBlock(e,t)}),ut.isRange(c)&&(c=Ri(e,c)),et.isPath(c)){var p=c,d=K.point(e,p),y=K.parent(e,p),g=h(y,1)[0];a=function(e){return e===g},f=d.path.length-p.length+1,c=d,v=!0}if(c){var b=K.pointRef(e,c,{affinity:"backward"}),m=K.nodes(e,{at:c,match:a,mode:n,voids:i}),w=h(m,1)[0];if(w){var x=K.void(e,{at:c,mode:"highest"});if(!i&&x){var O=h(x,2),j=O[0],A=O[1];if(U.isElement(j)&&e.isInline(j)){var _=K.after(e,A);if(!_){var P=et.next(A);Ji.insertNodes(e,{text:""},{at:P,voids:i}),_=K.point(e,P)}c=_,v=!0}f=c.path.length-A.length+1,v=!0}var k,E=K.pointRef(e,c),F=c.path.length-f,S=h(w,2)[1],D=c.path.slice(0,F),N=0===f?c.offset:c.path[F]+0,C=Ni(K.levels(e,{at:D,reverse:!0,voids:i}));try{for(C.s();!(k=C.n()).done;){var B=h(k.value,2),T=B[0],R=B[1],I=!1;if(R.length<S.length||0===R.length||!i&&K.isVoid(e,T))break;var M=b.current,z=K.isEnd(e,M,R);if(v||!b||!K.isEdge(e,M,R)){I=!0;var q=Ze.extractProps(T);e.apply({type:"split_node",path:R,position:N,properties:q})}N=R[R.length-1]+(I||z?1:0)}}catch(e){C.e(e)}finally{C.f()}if(null==t.at){var L=E.current||K.end(e,[]);Ji.select(e,L)}b.unref(),E.unref()}}}))},unsetNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n,o={},i=Ni(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o[a]=null}}catch(e){i.e(e)}finally{i.f()}Ji.setNodes(e,o,r)},unwrapNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,a=t.voids,u=void 0!==a&&a,c=t.at,s=void 0===c?e.selection:c,f=t.match;if(s){null==f&&(f=et.isPath(s)?Ii(e,s):function(t){return K.isBlock(e,t)}),et.isPath(s)&&(s=K.range(e,s));for(var l=ut.isRange(s)?K.rangeRef(e,s):null,v=K.nodes(e,{at:s,match:f,mode:n,voids:u}),p=Array.from(v,(function(t){var r=h(t,2)[1];return K.pathRef(e,r)})),d=function(){var t=g[y].unref(),r=K.node(e,t),n=h(r,1)[0],o=K.range(e,t);i&&l&&(o=ut.intersection(l.current,o)),Ji.liftNodes(e,{at:o,match:function(e){return U.isAncestor(n)&&n.children.includes(e)},voids:u})},y=0,g=p;y<g.length;y++)d();l&&l.unref()}}))},wrapNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K.withoutNormalizing(e,(function(){var n=r.mode,o=void 0===n?"lowest":n,i=r.split,a=void 0!==i&&i,u=r.voids,c=void 0!==u&&u,s=r.match,f=r.at,l=void 0===f?e.selection:f;if(l){if(null==s&&(s=et.isPath(l)?Ii(e,l):e.isInline(t)?function(t){return K.isInline(e,t)||_i.isText(t)}:function(t){return K.isBlock(e,t)}),a&&ut.isRange(l)){var v=ut.edges(l),p=h(v,2),d=p[0],y=p[1],g=K.rangeRef(e,l,{affinity:"inward"});Ji.splitNodes(e,{at:y,match:s,voids:c}),Ji.splitNodes(e,{at:d,match:s,voids:c}),l=g.unref(),null==r.at&&Ji.select(e,l)}for(var b=0,m=Array.from(K.nodes(e,{at:l,match:e.isInline(t)?function(t){return K.isBlock(e,t)}:function(e){return K.isEditor(e)},mode:"lowest",voids:c}));b<m.length;b++){var w=h(m[b],2)[1],x=ut.isRange(l)?ut.intersection(l,K.range(e,w)):l;if(x){var O=Array.from(K.nodes(e,{at:x,match:s,mode:o,voids:c}));O.length>0&&function(){var r=h(O,1)[0],n=O[O.length-1],o=h(r,2)[1],i=h(n,2)[1],a=et.equals(o,i)?et.parent(o):et.common(o,i),u=K.range(e,o,i),s=K.node(e,a),f=h(s,1)[0],l=a.length+1,v=et.next(i.slice(0,l)),p=Di(Di({},t),{},{children:[]});Ji.insertNodes(e,p,{at:v,voids:c}),Ji.moveNodes(e,{at:u,match:function(e){return U.isAncestor(f)&&f.children.includes(e)},to:v.concat(0),voids:c})}()}}}}))}},Ti=function e(t,r){if(U.isElement(r)){var n=r;return!!K.isVoid(t,r)||1===n.children.length&&e(t,n.children[0])}return!K.isEditor(r)},Ri=function(e,t){if(ut.isCollapsed(t))return t.anchor;var r=ut.edges(t),n=h(r,2)[1],o=K.pointRef(e,n);return Ji.delete(e,{at:t}),o.unref()},Ii=function(e,t){var r=K.node(e,t),n=h(r,1)[0];return function(e){return e===n}};function Mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qi={collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.edge,n=void 0===r?"anchor":r,o=e.selection;if(o)if("anchor"===n)Ji.select(e,o.anchor);else if("focus"===n)Ji.select(e,o.focus);else if("start"===n){var i=ut.edges(o),a=h(i,1),u=a[0];Ji.select(e,u)}else if("end"===n){var c=ut.edges(o),s=h(c,2),f=s[1];Ji.select(e,f)}},deselect:function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.selection,n=t.distance,o=void 0===n?1:n,i=t.unit,a=void 0===i?"character":i,u=t.reverse,c=void 0!==u&&u,s=t.edge,f=void 0===s?null:s;if(r){"start"===f&&(f=ut.isBackward(r)?"focus":"anchor"),"end"===f&&(f=ut.isBackward(r)?"anchor":"focus");var l=r.anchor,v=r.focus,h={distance:o,unit:a},p={};if(null==f||"anchor"===f){var d=c?K.before(e,l,h):K.after(e,l,h);d&&(p.anchor=d)}if(null==f||"focus"===f){var y=c?K.before(e,v,h):K.after(e,v,h);y&&(p.focus=y)}Ji.setSelection(e,p)}},select:function(e,t){var r=e.selection;if(t=K.range(e,t),r)Ji.setSelection(e,t);else{if(!ut.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.selection,o=r.edge,i=void 0===o?"both":o;if(n){"start"===i&&(i=ut.isBackward(n)?"focus":"anchor"),"end"===i&&(i=ut.isBackward(n)?"anchor":"focus");var a=n.anchor,u=n.focus,c="anchor"===i?a:u;Ji.setSelection(e,p({},"anchor"===i?"anchor":"focus",zi(zi({},c),t)))}},setSelection:function(e,t){var r=e.selection,n={},o={};if(r){for(var i in t)("anchor"===i&&null!=t.anchor&&!ot.equals(t.anchor,r.anchor)||"focus"===i&&null!=t.focus&&!ot.equals(t.focus,r.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==r[i])&&(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}};function Li(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ui(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ui(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wi={delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.withoutNormalizing(e,(function(){var r=t.reverse,n=void 0!==r&&r,o=t.unit,i=void 0===o?"character":o,a=t.distance,u=void 0===a?1:a,c=t.voids,s=void 0!==c&&c,f=t.at,l=void 0===f?e.selection:f,v=t.hanging,p=void 0!==v&&v;if(l){if(ut.isRange(l)&&ut.isCollapsed(l)&&(l=l.anchor),ot.isPoint(l)){var d=K.void(e,{at:l,mode:"highest"});if(!s&&d){l=h(d,2)[1]}else{var y={unit:i,distance:u};l={anchor:l,focus:n?K.before(e,l,y)||K.start(e,[]):K.after(e,l,y)||K.end(e,[])},p=!0}}if(et.isPath(l))Ji.removeNodes(e,{at:l,voids:s});else if(!ut.isCollapsed(l)){if(!p){var g=ut.edges(l),b=h(g,2)[1],m=K.end(e,[]);ot.equals(b,m)||(l=K.unhangRange(e,l,{voids:s}))}var w=ut.edges(l),x=h(w,2),O=x[0],j=x[1],A=K.above(e,{match:function(t){return K.isBlock(e,t)},at:O,voids:s}),_=K.above(e,{match:function(t){return K.isBlock(e,t)},at:j,voids:s}),P=A&&_&&!et.equals(A[1],_[1]),k=et.equals(O.path,j.path),E=s?null:K.void(e,{at:O,mode:"highest"}),F=s?null:K.void(e,{at:j,mode:"highest"});if(E){var S=K.before(e,O);S&&A&&et.isAncestor(A[1],S.path)&&(O=S)}if(F){var D=K.after(e,j);D&&_&&et.isAncestor(_[1],D.path)&&(j=D)}var N,C,B=[],T=Li(K.nodes(e,{at:l,voids:s}));try{for(T.s();!(C=T.n()).done;){var R=C.value,I=h(R,2),M=I[0],z=I[1];N&&0===et.compare(z,N)||(!s&&K.isVoid(e,M)||!et.isCommon(z,O.path)&&!et.isCommon(z,j.path))&&(B.push(R),N=z)}}catch(e){T.e(e)}finally{T.f()}var q=Array.from(B,(function(t){var r=h(t,2)[1];return K.pathRef(e,r)})),L=K.pointRef(e,O),U=K.pointRef(e,j);if(!k&&!E){var W=L.current,$=K.leaf(e,W),V=h($,1)[0],J=W.path,G=O.offset,Y=V.text.slice(G);Y.length>0&&e.apply({type:"remove_text",path:J,offset:G,text:Y})}for(var Z=0,X=q;Z<X.length;Z++){var H=X[Z].unref();Ji.removeNodes(e,{at:H,voids:s})}if(!F){var Q=U.current,ee=K.leaf(e,Q),te=h(ee,1)[0],re=Q.path,ne=k?O.offset:0,oe=te.text.slice(ne,j.offset);oe.length>0&&e.apply({type:"remove_text",path:re,offset:ne,text:oe})}!k&&P&&U.current&&L.current&&Ji.mergeNodes(e,{at:U.current,hanging:!0,voids:s});var ie=n?L.unref()||U.unref():U.unref()||L.unref();null==t.at&&ie&&Ji.select(e,ie)}}}))},insertFragment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,u=r.at,c=void 0===u?e.selection:u;if(t.length&&c){if(ut.isRange(c))if(o||(c=K.unhangRange(e,c)),ut.isCollapsed(c))c=c.anchor;else{var s=ut.edges(c),f=h(s,2)[1];if(!a&&K.void(e,{at:f}))return;var l=K.pointRef(e,f);Ji.delete(e,{at:c}),c=l.unref()}else et.isPath(c)&&(c=K.start(e,c));if(a||!K.void(e,{at:c})){var v=K.above(e,{at:c,match:function(t){return K.isInline(e,t)},mode:"highest",voids:a});if(v){var p=h(v,2)[1];if(K.isEnd(e,c,p))c=K.after(e,p);else if(K.isStart(e,c,p)){c=K.before(e,p)}}var d,y=K.above(e,{match:function(t){return K.isBlock(e,t)},at:c,voids:a}),g=h(y,2)[1],b=K.isStart(e,c,g),m=K.isEnd(e,c,g),w=!b||b&&m,x=!m,O=Ze.first({children:t},[]),j=h(O,2)[1],A=Ze.last({children:t},[]),_=h(A,2)[1],P=[],k=function(t){var r=h(t,2),n=r[0],o=r[1];return!(w&&et.isAncestor(o,j)&&U.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(x&&et.isAncestor(o,_)&&U.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))},E=Li(Ze.nodes({children:t},{pass:k}));try{for(E.s();!(d=E.n()).done;){var F=d.value;F[1].length>0&&k(F)&&P.push(F)}}catch(e){E.e(e)}finally{E.f()}for(var S=[],D=[],N=[],C=!0,B=!1,T=0,R=P;T<R.length;T++){var I=h(R[T],1)[0];U.isElement(I)&&!e.isInline(I)?(C=!1,B=!0,D.push(I)):C?S.push(I):N.push(I)}var M=K.nodes(e,{at:c,match:function(t){return _i.isText(t)||K.isInline(e,t)},mode:"highest",voids:a}),z=h(M,1)[0],q=h(z,2)[1],L=K.isStart(e,c,q),W=K.isEnd(e,c,q),$=K.pathRef(e,m?et.next(g):g),V=K.pathRef(e,W?et.next(q):q);Ji.splitNodes(e,{at:c,match:function(t){return B?K.isBlock(e,t):_i.isText(t)||K.isInline(e,t)},mode:B?"lowest":"highest",voids:a});var J=K.pathRef(e,!L||L&&W?et.next(q):q);if(Ji.insertNodes(e,S,{at:J.current,match:function(t){return _i.isText(t)||K.isInline(e,t)},mode:"highest",voids:a}),Ji.insertNodes(e,D,{at:$.current,match:function(t){return K.isBlock(e,t)},mode:"lowest",voids:a}),Ji.insertNodes(e,N,{at:V.current,match:function(t){return _i.isText(t)||K.isInline(e,t)},mode:"highest",voids:a}),!r.at){var G;G=N.length>0?et.previous(V.current):D.length>0?et.previous($.current):et.previous(J.current);var Y=K.end(e,G);Ji.select(e,Y)}J.unref(),$.unref(),V.unref()}}}))},insertText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K.withoutNormalizing(e,(function(){var n=r.voids,o=void 0!==n&&n,i=r.at,a=void 0===i?e.selection:i;if(a){if(et.isPath(a)&&(a=K.range(e,a)),ut.isRange(a))if(ut.isCollapsed(a))a=a.anchor;else{var u=ut.end(a);if(!o&&K.void(e,{at:u}))return;var c=K.pointRef(e,u);Ji.delete(e,{at:a,voids:o}),a=c.unref(),Ji.setSelection(e,{anchor:a,focus:a})}if(o||!K.void(e,{at:a})){var s=a,f=s.path,l=s.offset;t.length>0&&e.apply({type:"insert_text",path:f,offset:l,text:t})}}}))}};function $i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ji=Vi(Vi(Vi(Vi({},{transform:function(e,t){e.children=Ve(e.children);var r=e.selection&&Ve(e.selection);switch(t.type){case"insert_node":var n=t.path,o=t.node,i=Ze.parent(e,n),a=n[n.length-1];if(i.children.splice(a,0,o),r){var u,c=Ei(ut.points(r));try{for(c.s();!(u=c.n()).done;){var f=h(u.value,2),l=f[0];r[f[1]]=ot.transform(l,t)}}catch(e){c.e(e)}finally{c.f()}}break;case"insert_text":var v=t.path,p=t.offset,d=t.text;if(0===d.length)break;var y=Ze.leaf(e,v),g=y.text.slice(0,p),b=y.text.slice(p);if(y.text=g+d+b,r){var m,w=Ei(ut.points(r));try{for(w.s();!(m=w.n()).done;){var x=h(m.value,2),O=x[0];r[x[1]]=ot.transform(O,t)}}catch(e){w.e(e)}finally{w.f()}}break;case"merge_node":var j=t.path,A=Ze.get(e,j),_=et.previous(j),P=Ze.get(e,_),k=Ze.parent(e,j),E=j[j.length-1];if(_i.isText(A)&&_i.isText(P))P.text+=A.text;else{if(_i.isText(A)||_i.isText(P))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(j,"] to nodes of different interfaces: ").concat(A," ").concat(P));var F;(F=P.children).push.apply(F,s(A.children))}if(k.children.splice(E,1),r){var S,D=Ei(ut.points(r));try{for(D.s();!(S=D.n()).done;){var N=h(S.value,2),C=N[0];r[N[1]]=ot.transform(C,t)}}catch(e){D.e(e)}finally{D.f()}}break;case"move_node":var B=t.path,T=t.newPath;if(et.isAncestor(B,T))throw new Error("Cannot move a path [".concat(B,"] to new path [").concat(T,"] because the destination is inside itself."));var R=Ze.get(e,B),I=Ze.parent(e,B),M=B[B.length-1];I.children.splice(M,1);var z=et.transform(B,t),q=Ze.get(e,et.parent(z)),L=z[z.length-1];if(q.children.splice(L,0,R),r){var U,W=Ei(ut.points(r));try{for(W.s();!(U=W.n()).done;){var $=h(U.value,2),V=$[0];r[$[1]]=ot.transform(V,t)}}catch(e){W.e(e)}finally{W.f()}}break;case"remove_node":var J=t.path,G=J[J.length-1];if(Ze.parent(e,J).children.splice(G,1),r){var K,Y=Ei(ut.points(r));try{for(Y.s();!(K=Y.n()).done;){var Z=h(K.value,2),X=Z[0],Q=Z[1],ee=ot.transform(X,t);if(null!=r&&null!=ee)r[Q]=ee;else{var te,re=void 0,ne=void 0,oe=Ei(Ze.texts(e));try{for(oe.s();!(te=oe.n()).done;){var ie=h(te.value,2),ae=ie[0],ue=ie[1];if(-1!==et.compare(ue,J)){ne=[ae,ue];break}re=[ae,ue]}}catch(e){oe.e(e)}finally{oe.f()}re?(X.path=re[1],X.offset=re[0].text.length):ne?(X.path=ne[1],X.offset=0):r=null}}}catch(e){Y.e(e)}finally{Y.f()}}break;case"remove_text":var ce=t.path,se=t.offset,fe=t.text;if(0===fe.length)break;var le=Ze.leaf(e,ce),ve=le.text.slice(0,se),he=le.text.slice(se+fe.length);if(le.text=ve+he,r){var pe,de=Ei(ut.points(r));try{for(de.s();!(pe=de.n()).done;){var ye=h(pe.value,2),ge=ye[0];r[ye[1]]=ot.transform(ge,t)}}catch(e){de.e(e)}finally{de.f()}}break;case"set_node":var be=t.path,me=t.properties,we=t.newProperties;if(0===be.length)throw new Error("Cannot set properties on the root node!");var xe=Ze.get(e,be);for(var Oe in we){if("children"===Oe||"text"===Oe)throw new Error('Cannot set the "'.concat(Oe,'" property of nodes!'));var je=we[Oe];null==je?delete xe[Oe]:xe[Oe]=je}for(var Ae in me)we.hasOwnProperty(Ae)||delete xe[Ae];break;case"set_selection":var _e=t.newProperties;if(null==_e)r=_e;else{if(null==r){if(!ut.isRange(_e))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(_e)," when there is no current selection."));r=ki({},_e)}for(var Pe in _e){var ke=_e[Pe];if(null==ke){if("anchor"===Pe||"focus"===Pe)throw new Error('Cannot remove the "'.concat(Pe,'" selection property'));delete r[Pe]}else r[Pe]=ke}}break;case"split_node":var Ee=t.path,Fe=t.position,Se=t.properties;if(0===Ee.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ee,"] because the root node cannot be split."));var De,Ne=Ze.get(e,Ee),Ce=Ze.parent(e,Ee),Be=Ee[Ee.length-1];if(_i.isText(Ne)){var Te=Ne.text.slice(0,Fe),Re=Ne.text.slice(Fe);Ne.text=Te,De=ki(ki({},Se),{},{text:Re})}else{var Ie=Ne.children.slice(0,Fe),Me=Ne.children.slice(Fe);Ne.children=Ie,De=ki(ki({},Se),{},{children:Me})}if(Ce.children.splice(Be+1,0,De),r){var ze,qe=Ei(ut.points(r));try{for(qe.s();!(ze=qe.n()).done;){var Le=h(ze.value,2),Ue=Le[0];r[Le[1]]=ot.transform(Ue,t)}}catch(e){qe.e(e)}finally{qe.f()}}}e.children=Je(e.children),e.selection=r?H(r)?Je(r):r:null}}),Bi),qi),Wi);e.Editor=K,e.Element=U,e.Location=Y,e.Node=Ze,e.Operation=Qe,e.Path=et,e.PathRef=tt,e.Point=ot,e.PointRef=it,e.Range=ut,e.RangeRef=ct,e.Span=Z,e.Text=_i,e.Transforms=Ji,e.createEditor=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var r,n=j(K.pathRefs(e));try{for(n.s();!(r=n.n()).done;){var o=r.value;tt.transform(o,t)}}catch(e){n.e(e)}finally{n.f()}var i,a=j(K.pointRefs(e));try{for(a.s();!(i=a.n()).done;){var u=i.value;it.transform(u,t)}}catch(e){a.e(e)}finally{a.f()}var c,s=j(K.rangeRefs(e));try{for(s.s();!(c=s.n()).done;){var f=c.value;ct.transform(f,t)}}catch(e){s.e(e)}finally{s.f()}var l,v=new Set,h=[],p=function(e){if(e){var t=e.join(",");v.has(t)||(v.add(t),h.push(e))}},g=d.get(e)||[],b=_(t),m=j(g);try{for(m.s();!(l=m.n()).done;){var w=l.value;p(et.transform(w,t))}}catch(e){m.e(e)}finally{m.f()}var x,O=j(b);try{for(O.s();!(x=O.n()).done;){p(x.value)}}catch(e){O.e(e)}finally{O.f()}d.set(e,h),Ji.transform(e,t),e.operations.push(t),K.normalize(e),"set_selection"===t.type&&(e.marks=null),y.get(e)||(y.set(e,!0),Promise.resolve().then((function(){y.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,r){var n=e.selection;if(n)if(ut.isExpanded(n))Ji.setNodes(e,p({},t,r),{match:_i.isText,split:!0});else{var o=O(O({},K.marks(e)||{}),{},p({},t,r));e.marks=o,e.onChange()}},deleteBackward:function(t){var r=e.selection;r&&ut.isCollapsed(r)&&Ji.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var r=e.selection;r&&ut.isCollapsed(r)&&Ji.delete(e,{unit:t})},deleteFragment:function(t){var r=e.selection;r&&ut.isExpanded(r)&&Ji.delete(e,{reverse:"backward"===t})},getFragment:function(){var t=e.selection;return t?Ze.fragment(e,t):[]},insertBreak:function(){Ji.splitNodes(e,{always:!0})},insertFragment:function(t){Ji.insertFragment(e,t)},insertNode:function(t){Ji.insertNodes(e,t)},insertText:function(t){var r=e.selection,n=e.marks;if(r){if(ut.isCollapsed(r)){var o=K.above(e,{match:function(t){return K.isInline(e,t)},mode:"highest"});if(o){var i=h(o,2)[1];if(K.isEnd(e,r.anchor,i)){var a=K.after(e,i);Ji.setSelection(e,{anchor:a,focus:a})}}}if(n){var u=O({text:t},n);Ji.insertNodes(e,u)}else Ji.insertText(e,t);e.marks=null}},normalizeNode:function(t){var r=h(t,2),n=r[0],o=r[1];if(!_i.isText(n))if(U.isElement(n)&&0===n.children.length){Ji.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}else for(var i=!K.isEditor(n)&&(U.isElement(n)&&(e.isInline(n)||0===n.children.length||_i.isText(n.children[0])||e.isInline(n.children[0]))),a=0,u=0;u<n.children.length;u++,a++){var c=Ze.get(e,o);if(!_i.isText(c)){var s=n.children[u],f=c.children[a-1],l=u===n.children.length-1;if((_i.isText(s)||U.isElement(s)&&e.isInline(s))!==i)Ji.removeNodes(e,{at:o.concat(a),voids:!0}),a--;else if(U.isElement(s)){if(e.isInline(s))if(null!=f&&_i.isText(f)){if(l){Ji.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{Ji.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else null!=f&&_i.isText(f)&&(_i.equals(s,f,{loose:!0})?(Ji.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===f.text?(Ji.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):l&&""===s.text&&(Ji.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}}},removeMark:function(t){var r=e.selection;if(r)if(ut.isExpanded(r))Ji.unsetNodes(e,t,{match:_i.isText,split:!0});else{var n=O({},K.marks(e)||{});delete n[t],e.marks=n,e.onChange()}}};return e},Object.defineProperty(e,"__esModule",{value:!0})}));
